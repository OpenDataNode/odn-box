<objectTemplate xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
				xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
				xmlns:ext="http://midpoint.evolveum.com/xml/ns/custom/opendata/ext"
                oid="10000000-0000-0000-0000-000000000222"
                version="2">
   <name>User Template</name>
   <mapping>
      <name>Administrator role assignment</name>
      <description>Assign 'administrator' role to the user.</description>
      <source>
         <name>role</name>
         <c:path>$user/extension/ext:role</c:path>
      </source>
      <expression>
         <assignmentTargetSearch>
            <targetType>c:RoleType</targetType>
            <oid>11111111-0000-0000-0000-000000000003</oid>
         </assignmentTargetSearch>
      </expression>
      <target>
         <c:path>assignment</c:path>
      </target>
      <condition>
         <script>
            <code>
				"admin".equals(role);
            </code>
         </script>
      </condition>
   </mapping>
   <mapping>
      <name>Administrator role assignment</name>
      <description>Assign midPoint's administrator role</description>
      <source>
         <name>role</name>
         <c:path>$user/extension/ext:role</c:path>
      </source>
      <expression>
         <assignmentTargetSearch>
            <targetType>c:RoleType</targetType>
            <oid>00000000-0000-0000-0000-000000000004</oid>
         </assignmentTargetSearch>
      </expression>
      <target>
         <c:path>assignment</c:path>
      </target>
      <condition>
         <script>
            <code>
				"admin".equals(role);
            </code>
         </script>
      </condition>
   </mapping>
   <mapping>
      <name>User role assignment</name>
      <description>Assign 'user' role to the user.</description>
      <source>
         <name>role</name>
         <c:path>$user/extension/ext:role</c:path>
      </source>
      <expression>
         <assignmentTargetSearch>
            <targetType>c:RoleType</targetType>
            <oid>11111111-0000-0000-0000-000000000004</oid>
         </assignmentTargetSearch>
      </expression>
      <target>
         <c:path>assignment</c:path>
      </target>
      <condition>
         <script>
            <code>
				"user".equals(role)
            </code>
         </script>
      </condition>
   </mapping>
   <mapping>
      <name>End User role assignment</name>
      <description>Assign midPoint's user role to the user.</description>
      <source>
         <name>role</name>
         <c:path>$user/extension/ext:role</c:path>
      </source>
      <expression>
         <assignmentTargetSearch>
            <targetType>c:RoleType</targetType>
            <oid>00000000-0000-0000-0000-000000000008</oid>
         </assignmentTargetSearch>
      </expression>
      <target>
         <c:path>assignment</c:path>
      </target>
      <condition>
         <script>
            <code>
				"user".equals(role)
            </code>
         </script>
      </condition>
   </mapping>
   
      <item>
		<ref>c:additionalName</ref>
		<limitations>
			<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:nickName</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:fullName</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
    <item>
		<ref>c:honorificPrefix</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
    <item>
		<ref>c:honorificSuffix</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:locale</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:timezone</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:employeeNumber</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:employeeType</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:locality</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:costCenter</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:organizationalUnit</ref>
		<limitations>
			<layer>PRESENTATION</layer>
			<ignore>true</ignore>
		</limitations>
   </item>
   <item>
		<ref>c:name</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   <item>
		<ref>c:givenName</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   <item>
		<ref>c:familyName</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   <item>
		<ref>c:extension/ext:role</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   <item>
		<ref>c:organization</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   <item>
		<ref>c:emailAddress</ref>
		<limitations>
		<layer>PRESENTATION</layer>
			<minOccurs>1</minOccurs>
		</limitations>
   </item>
   
   
   <mapping>
      <name>User- Full name</name>
	  <source>
		<path>givenName</path>
	  </source>
	  <source>
		<path>familyName</path>
	  </source>
      <expression>
		<script>
			<code>givenName + ' ' + familyName</code>
		</script>
      </expression>
      <target>
         <path>fullName</path>
      </target>
   </mapping>

</objectTemplate>
